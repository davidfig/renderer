<head>
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1">
    <script src="https://rawgit.com/pixijs/pixi.js/dev/bin/pixi.js"></script>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.5.0/styles/ascetic.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.5.0/highlight.min.js"></script>

    <!-- For github.io -->
    <script src="https://rawgit.com/davidfig/animate/master/easing.js"></script>
    <script src="https://rawgit.com/davidfig/animate/master/animate.js"></script>
    <script src="https://rawgit.com/davidfig/update/master/update.js"></script>
    <script src="https://rawgit.com/davidfig/debug/master/debug.js"></script>
    <script src="https://rawgit.com/davidfig/renderer/master/renderer.js"></script>

    <!-- For local debug -->
    <!--<script src="../animate/easing.js"></script>
    <script src="../animate/animate.js"></script>
    <script src="../update/update.js"></script>
    <script src="../debug/debug.js"></script>
    <script src="../renderer/renderer.js"></script>-->
    <style>
        body {
            margin: 0;
            padding: 0;
        }
        .title {
            margin-top: 1%;
            margin-left: 15%;
            font-size: 200%;
        }
        #code {
            left: 15%;
            position: absolute;
            word-wrap: break-word;
            z-index: -1;
        }
    </style>
</head>
<body>
    <div class="title">Example for <a href="https://github.com/davidfig/renderer/">github.com/davidfig/renderer/</a></div>
    <pre><code class="javascript" id="code"></code></pre>
    <script id="sample">

        // debug panel on the bottom right
        Debug.init();

        // used for automatic rendering
        Update.init();
        Update.update();

        // creates the renderer with one option
        var resolution = window.devicePixelRatio;
        var renderer = new Renderer({autoresize: true, resolution: resolution, debug: true});
        renderer.canvas.style.pointerEvents = 'none';

        // set initial position for all triangles
        for (var i = 0; i < 100; i++)
        {
            var t = triangle(Math.random() * renderer.width * 0.1, Math.random() * 0xffffff);
            t.position.set(Math.random() * renderer.width, Math.random() * renderer.height);
            next;
        }
        move();
        Update.add(move, 6000);

        debug('Notice the render light above automatically turns off when the animations stop.');

        // animate one triangle with random values
        function next(t)
        {
            var x = Math.random() * renderer.width;
            var y = Math.random() * renderer.height;
            var scaleX = Math.random() * 3;
            var scaleY = Math.random() * 3;
            var alpha = 0.5 * Math.random();
            var rotation = Math.random() * Math.PI * 2;
            var time = 1000 + Math.random() * 4000;
            Animate.to(t, {alpha: alpha, x: x, y: y, scale: {x: scaleX, y: scaleY}, rotation: rotation}, time, {renderer: renderer}, Easing.easeInOutSine);
        }

        // animate all objects
        function move()
        {
            for (var i = 0; i < renderer.stage.children.length; i++)
            {
                next(renderer.stage.children[i]);
            }
        }

        // create the triangles
        function triangle(size, color)
        {
            var half = size / 2;
            var g = new PIXI.Graphics();
            renderer.add(g);
            g.beginFill(color);
            g.moveTo(0, -half);
            g.lineTo(-half, half);
            g.lineTo(half, half);
            g.closePath();
            g.endFill();
            return g;
        }

    </script>
    <script>
        window.onload = function()
        {
            var code = document.getElementById('code');
            var script = document.getElementById('sample');
            code.innerHTML = script.innerHTML;
            hljs.highlightBlock(code);
        };
    </script>
</body>